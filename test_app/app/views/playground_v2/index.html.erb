<%= render @playground %>

<!-- Monaco Editor -->
<script src="/monaco-editor/min/vs/loader.js"></script>
<script>
  require.config({ 
    paths: { 
      'vs': '/monaco-editor/min/vs' 
    }
  });
  
  // PlaygroundDataManager is now initialized in the playground_v2_controller.js
  // This ensures proper integration with the IntelliSense completion system
</script>

<style>
  /* Solarized Light color definitions */
  :root {
    --solarized-base3: #fdf6e3;
    --solarized-base2: #eee8d5;
    --solarized-base1: #93a1a1;
    --solarized-base0: #839496;
    --solarized-base00: #657b83;
    --solarized-base01: #586e75;
  }
  
  /* Tailwind utility classes for Solarized colors */
  .bg-solarized-base3 { background-color: var(--solarized-base3); }
  .bg-solarized-base2 { background-color: var(--solarized-base2); }
  .border-solarized-base1 { border-color: var(--solarized-base1); }
  .text-solarized-base00 { color: var(--solarized-base00); }
  .text-solarized-base01 { color: var(--solarized-base01); }
  .hover\:text-solarized-base01:hover { color: var(--solarized-base01); }
  
  /* Monaco Editor container styling */
  #monaco-editor {
    width: 100%;
    height: 100%;
    transition: opacity 0.3s ease, transform 0.3s ease;
  }
  
  /* Loading indicator styling */
  #editor-loading {
    transition: opacity 0.3s ease, transform 0.3s ease;
  }
  
  /* Custom animations for loading UI */
  @keyframes bounce-delayed {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
  }
  
  .animate-bounce-delayed {
    animation: bounce-delayed 2s infinite;
  }
  
  /* Gradient background animation */
  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  .animate-gradient {
    background-size: 200% 200%;
    animation: gradient-shift 4s ease infinite;
  }
  
  /* Enhanced loading animations */
  @keyframes pulse-ring {
    0% { transform: scale(0.8); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.5; }
    100% { transform: scale(1.4); opacity: 0; }
  }
  
  @keyframes progress-bar {
    0% { width: 0%; }
    50% { width: 60%; }
    100% { width: 75%; }
  }
  
  @keyframes fade-in-up {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  
  /* Loading state specific styles */
  #editor-loading {
    backdrop-filter: blur(2px);
  }
  
  #editor-loading .progress-bar {
    animation: progress-bar 2s ease-in-out infinite;
  }
  
  #editor-loading .fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
  }
  
  /* Spinning ring with better easing */
  #editor-loading .spinner-ring {
    animation: spin 3s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
  }
  
  /* Glowing effect for center icon */
  #editor-loading .glow-icon {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    animation: glow-pulse 2s ease-in-out infinite alternate;
  }
  
  @keyframes glow-pulse {
    0% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
    100% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8), 0 0 40px rgba(147, 51, 234, 0.3); }
  }
  
  /* Device preview classes */
  .device-mobile #preview-container {
    max-width: 375px;
    margin: 0 auto;
    border: 2px solid #e5e7eb;
    border-radius: 1rem;
  }
  
  .device-tablet #preview-container {
    max-width: 768px;
    margin: 0 auto;
    border: 2px solid #e5e7eb;
    border-radius: 0.5rem;
  }
</style>